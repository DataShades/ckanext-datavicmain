{% import 'macros/form.html' as form %}

{# this snippet is meant to be called from category.html,
not used as a form_snippet directly #}
{% macro _category() %}
  {% set existing_category = data.category %}
  {% call form.input_block('field-category',
    label=h.scheming_language_text(field.label),
    error=errors[field.field_name],
    is_required=category_required,
    classes=['form-group', 'control-medium'],
    extra_html=caller() if caller,
    ) %}
    <div {{
      form.attributes(field.form_attrs) if 'form_attrs' in field else '' }}>
    <select id="field-category" name="category">
      {% for category in categories_available %}
        {% set selected_category = existing_category == category.id %}
        {{ category_option_tag(category, selected_category) }}
      {% endfor %}
    </select>
    </div>
  {% endcall %}
{% endmacro %}

{% call _category() %}
  {%- snippet 'scheming/form_snippets/help_text.html', field=field %}
{% endcall %}